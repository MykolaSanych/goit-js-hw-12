{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '43875376-ffcf8bec5b4985f5e1efc350d';\n\nexport const pictureRequest = async (request, page) => {\n  return await axios.get(\n    `https://pixabay.com/api/?key=${KEY}&q=${request}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`\n  );\n};\n","export function render(arreyFoto) {\n  const listFoto = document.querySelector('.list-foto');\n\n  const gallery = arreyFoto.reduce((acum, item) => {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = item;\n    return (\n      acum +\n      `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=${largeImageURL} >\n        <img\n          class=\"gallery-image\"\n          src=${webformatURL}\n         data-source=${largeImageURL}\n          alt=${tags}\n        />\n      </a>\n      <div>\n      <p>Likes<br><span>${likes}</span></p>\n      <p>Views<br><span>${views}</span></p>\n      <p>Coments<br><span>${comments}</span></p>\n      <p>Downloads<br><span>${downloads}</span></p>\n      <div/>\n    </li>`\n    );\n  }, '');\n  listFoto.insertAdjacentHTML('beforeend', gallery);\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { pictureRequest } from './js/pixabay-api.js';\nimport { render } from './js/render-functions.js';\n\nlet gallery = new SimpleLightbox('.list-foto a');\nlet page = 1;\nconst inputSearch = document.querySelector('.input-search');\nconst loader = document.querySelector('.loader');\nconst buttonMore = document.querySelector('.button-more');\nlet queryWord = '';\n\nconst submitInput = async event => {\n  try {\n    event.preventDefault();\n    buttonMore.classList.add('hiden');\n    const listFoto = document.querySelector('.list-foto');\n    listFoto.innerHTML = '';\n    queryWord = inputSearch.value.trim();\n    if (queryWord.length < 3) {\n      return iziToast.error({\n        position: 'topRight',\n        title: 'Error',\n        message: 'Please enter your request.',\n      });\n    }\n    page = 1;\n\n    loader.classList.remove('hiden');\n    const response = await pictureRequest(queryWord, page);\n    if (response.status === 200) {\n      loader.classList.add('hiden');\n    }\n    const images = response.data;\n    const arr = images.hits;\n    if (arr.length > 0) {\n      render(arr);\n      gallery.refresh();\n      buttonMore.classList.remove('hiden');\n    } else {\n      iziToast.error({\n        position: 'topRight',\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    const quantityArr = Math.ceil(images.totalHits / 15);\n    if (page === quantityArr) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      buttonMore.classList.add('hiden');\n      loader.classList.add('hiden');\n    }\n  } catch (error) {\n    console.log(error);\n    throw error;\n  }\n};\n\ndocument.querySelector('.input').addEventListener('submit', submitInput);\n\nconst clickLoadMore = async () => {\n  loader.classList.remove('hiden');\n  page++;\n  const images = await pictureRequest(queryWord, page);\n  const promis = images.data;\n  const arr = promis.hits;\n  if (arr.length > 0) {\n    render(arr);\n    gallery.refresh();\n    loader.classList.add('hiden');\n    const galleryItem = document.querySelector('.gallery-item');\n    const haightItem = galleryItem.getBoundingClientRect().height * 2;\n    window.scrollBy({\n      top: haightItem,\n      left: 0,\n      behavior: 'smooth',\n    });\n  }\n  const quantityArr = Math.ceil(images.data.totalHits / 15);\n  console.log(images);\n  console.log(quantityArr);\n  console.log(page);\n  if (page === quantityArr) {\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    buttonMore.classList.add('hiden');\n    loader.classList.add('hiden');\n  }\n};\n\nbuttonMore.addEventListener('click', clickLoadMore);\n"],"names":["KEY","pictureRequest","request","page","axios","render","arreyFoto","listFoto","gallery","acum","item","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","inputSearch","loader","buttonMore","queryWord","submitInput","event","iziToast","response","images","arr","quantityArr","error","clickLoadMore","haightItem"],"mappings":"owBAEA,MAAMA,EAAM,qCAECC,EAAiB,MAAOC,EAASC,IACrC,MAAMC,EAAM,IACjB,gCAAgCJ,CAAG,MAAME,CAAO,6EAA6EC,CAAI,EACrI,ECPO,SAASE,EAAOC,EAAW,CAChC,MAAMC,EAAW,SAAS,cAAc,YAAY,EAE9CC,EAAUF,EAAU,OAAO,CAACG,EAAMC,IAAS,CAC/C,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,OACED,EACA;AAAA,qCAC+BG,CAAa;AAAA;AAAA;AAAA,gBAGlCD,CAAY;AAAA,uBACLC,CAAa;AAAA,gBACpBC,CAAI;AAAA;AAAA;AAAA;AAAA,0BAIMC,CAAK;AAAA,0BACLC,CAAK;AAAA,4BACHC,CAAQ;AAAA,8BACNC,CAAS;AAAA;AAAA,UAIpC,EAAE,EAAE,EACLV,EAAS,mBAAmB,YAAaC,CAAO,CAClD,CC3BA,IAAIA,EAAU,IAAIU,EAAe,cAAc,EAC3Cf,EAAO,EACX,MAAMgB,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,cAAc,EACxD,IAAIC,EAAY,GAEhB,MAAMC,EAAc,MAAMC,GAAS,CACjC,GAAI,CACFA,EAAM,eAAc,EACpBH,EAAW,UAAU,IAAI,OAAO,EAChC,MAAMd,EAAW,SAAS,cAAc,YAAY,EAGpD,GAFAA,EAAS,UAAY,GACrBe,EAAYH,EAAY,MAAM,OAC1BG,EAAU,OAAS,EACrB,OAAOG,EAAS,MAAM,CACpB,SAAU,WACV,MAAO,QACP,QAAS,4BACjB,CAAO,EAEHtB,EAAO,EAEPiB,EAAO,UAAU,OAAO,OAAO,EAC/B,MAAMM,EAAW,MAAMzB,EAAeqB,EAAWnB,CAAI,EACjDuB,EAAS,SAAW,KACtBN,EAAO,UAAU,IAAI,OAAO,EAE9B,MAAMO,EAASD,EAAS,KAClBE,EAAMD,EAAO,KACfC,EAAI,OAAS,GACfvB,EAAOuB,CAAG,EACVpB,EAAQ,QAAO,EACfa,EAAW,UAAU,OAAO,OAAO,GAEnCI,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QACE,0EACV,CAAO,EAEH,MAAMI,EAAc,KAAK,KAAKF,EAAO,UAAY,EAAE,EAC/CxB,IAAS0B,IACXJ,EAAS,KAAK,CACZ,QAAS,4DACjB,CAAO,EACDJ,EAAW,UAAU,IAAI,OAAO,EAChCD,EAAO,UAAU,IAAI,OAAO,EAE/B,OAAQU,EAAO,CACd,cAAQ,IAAIA,CAAK,EACXA,CACP,CACH,EAEA,SAAS,cAAc,QAAQ,EAAE,iBAAiB,SAAUP,CAAW,EAEvE,MAAMQ,EAAgB,SAAY,CAChCX,EAAO,UAAU,OAAO,OAAO,EAC/BjB,IACA,MAAMwB,EAAS,MAAM1B,EAAeqB,EAAWnB,CAAI,EAE7CyB,EADSD,EAAO,KACH,KACnB,GAAIC,EAAI,OAAS,EAAG,CAClBvB,EAAOuB,CAAG,EACVpB,EAAQ,QAAO,EACfY,EAAO,UAAU,IAAI,OAAO,EAE5B,MAAMY,EADc,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAAS,EAChE,OAAO,SAAS,CACd,IAAKA,EACL,KAAM,EACN,SAAU,QAChB,CAAK,CACF,CACD,MAAMH,EAAc,KAAK,KAAKF,EAAO,KAAK,UAAY,EAAE,EACxD,QAAQ,IAAIA,CAAM,EAClB,QAAQ,IAAIE,CAAW,EACvB,QAAQ,IAAI1B,CAAI,EACZA,IAAS0B,IACXJ,EAAS,KAAK,CACZ,QAAS,4DACf,CAAK,EACDJ,EAAW,UAAU,IAAI,OAAO,EAChCD,EAAO,UAAU,IAAI,OAAO,EAEhC,EAEAC,EAAW,iBAAiB,QAASU,CAAa"}