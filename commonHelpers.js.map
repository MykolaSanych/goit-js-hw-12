{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '43875376-ffcf8bec5b4985f5e1efc350d';\n\nexport const pictureRequest = async (request, page) => {\n  return await axios.get(\n    `https://pixabay.com/api/?key=${KEY}&q=${request}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`\n  );\n};\n","export function render(arreyFoto) {\n  const listFoto = document.querySelector('.list-foto');\n\n  const gallery = arreyFoto.reduce((acum, item) => {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = item;\n    return (\n      acum +\n      `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=${largeImageURL} >\n        <img\n          class=\"gallery-image\"\n          src=${webformatURL}\n         data-source=${largeImageURL}\n          alt=${tags}\n        />\n      </a>\n      <div>\n      <p>Likes<br><span>${likes}</span></p>\n      <p>Views<br><span>${views}</span></p>\n      <p>Coments<br><span>${comments}</span></p>\n      <p>Downloads<br><span>${downloads}</span></p>\n      <div/>\n    </li>`\n    );\n  }, '');\n  listFoto.insertAdjacentHTML('beforeend', gallery);\n  const galleryItem = document.querySelector('.gallery-item');\n  const haightItem = galleryItem.getBoundingClientRect().height * 2;\n  window.scrollBy({\n    top: haightItem,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { pictureRequest } from './js/pixabay-api.js';\nimport { render } from './js/render-functions.js';\n\nlet gallery = new SimpleLightbox('.list-foto a');\nlet page = 1;\nconst inputSearch = document.querySelector('.input-search');\nconst loader = document.querySelector('.loader');\nconst buttonMore = document.querySelector('.button-more');\n\nlet queryWord = '';\ndocument.querySelector('.input').addEventListener('submit', submitInput);\nbuttonMore.addEventListener('click', clickLoadMore);\n\nfunction submitInput(event) {\n  event.preventDefault();\n  buttonMore.classList.add('hiden');\n  const listFoto = document.querySelector('.list-foto');\n  listFoto.innerHTML = '';\n  queryWord = inputSearch.value.trim();\n  if (queryWord.length < 3) {\n    return iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n  page = 1;\n\n  loader.classList.remove('hiden');\n  pictureRequest(queryWord, page)\n    .then(response => {\n      if (response.status === 200) {\n        loader.classList.add('hiden');\n      }\n      return response.data;\n    })\n\n    .then(images => {\n      const arr = images.hits;\n\n      if (arr.length > 0) {\n        render(arr);\n        gallery.refresh();\n        buttonMore.classList.remove('hiden');\n      } else {\n        iziToast.error({\n          position: 'topRight',\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n    })\n\n    .catch(error => {\n      console.log(error);\n      throw error;\n    });\n}\n\nfunction clickLoadMore() {\n  loader.classList.remove('hiden');\n  page++;\n  pictureRequest(queryWord, page)\n    .then(images => {\n      const promis = images.data;\n      const arr = promis.hits;\n\n      if (arr.length > 0) {\n        render(arr);\n        gallery.refresh();\n        loader.classList.add('hiden');\n      }\n      return images.data;\n    })\n    .then(images => {\n      const quantityArr = Math.ceil(images.totalHits / 15);\n      if (page > quantityArr) {\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        buttonMore.classList.add('hiden');\n        loader.classList.add('hiden');\n      }\n    });\n}\n"],"names":["KEY","pictureRequest","request","page","axios","render","arreyFoto","listFoto","gallery","acum","item","webformatURL","largeImageURL","tags","likes","views","comments","downloads","haightItem","SimpleLightbox","inputSearch","loader","buttonMore","queryWord","submitInput","clickLoadMore","event","iziToast","response","images","arr","error","quantityArr"],"mappings":"owBAEA,MAAMA,EAAM,qCAECC,EAAiB,MAAOC,EAASC,IACrC,MAAMC,EAAM,IACjB,gCAAgCJ,CAAG,MAAME,CAAO,6EAA6EC,CAAI,EACrI,ECPO,SAASE,EAAOC,EAAW,CAChC,MAAMC,EAAW,SAAS,cAAc,YAAY,EAE9CC,EAAUF,EAAU,OAAO,CAACG,EAAMC,IAAS,CAC/C,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,OACED,EACA;AAAA,qCAC+BG,CAAa;AAAA;AAAA;AAAA,gBAGlCD,CAAY;AAAA,uBACLC,CAAa;AAAA,gBACpBC,CAAI;AAAA;AAAA;AAAA;AAAA,0BAIMC,CAAK;AAAA,0BACLC,CAAK;AAAA,4BACHC,CAAQ;AAAA,8BACNC,CAAS;AAAA;AAAA,UAIpC,EAAE,EAAE,EACLV,EAAS,mBAAmB,YAAaC,CAAO,EAEhD,MAAMU,EADc,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAAS,EAChE,OAAO,SAAS,CACd,IAAKA,EACL,KAAM,EACN,SAAU,QACd,CAAG,CACH,CClCA,IAAIV,EAAU,IAAIW,EAAe,cAAc,EAC3ChB,EAAO,EACX,MAAMiB,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,cAAc,EAExD,IAAIC,EAAY,GAChB,SAAS,cAAc,QAAQ,EAAE,iBAAiB,SAAUC,CAAW,EACvEF,EAAW,iBAAiB,QAASG,CAAa,EAElD,SAASD,EAAYE,EAAO,CAC1BA,EAAM,eAAc,EACpBJ,EAAW,UAAU,IAAI,OAAO,EAChC,MAAMf,EAAW,SAAS,cAAc,YAAY,EAGpD,GAFAA,EAAS,UAAY,GACrBgB,EAAYH,EAAY,MAAM,OAC1BG,EAAU,OAAS,EACrB,OAAOI,EAAS,MAAM,CACpB,SAAU,WACV,MAAO,QACP,QACE,0EACR,CAAK,EAEHxB,EAAO,EAEPkB,EAAO,UAAU,OAAO,OAAO,EAC/BpB,EAAesB,EAAWpB,CAAI,EAC3B,KAAKyB,IACAA,EAAS,SAAW,KACtBP,EAAO,UAAU,IAAI,OAAO,EAEvBO,EAAS,KACjB,EAEA,KAAKC,GAAU,CACd,MAAMC,EAAMD,EAAO,KAEfC,EAAI,OAAS,GACfzB,EAAOyB,CAAG,EACVtB,EAAQ,QAAO,EACfc,EAAW,UAAU,OAAO,OAAO,GAEnCK,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QACE,0EACZ,CAAS,CAET,CAAK,EAEA,MAAMI,GAAS,CACd,cAAQ,IAAIA,CAAK,EACXA,CACZ,CAAK,CACL,CAEA,SAASN,GAAgB,CACvBJ,EAAO,UAAU,OAAO,OAAO,EAC/BlB,IACAF,EAAesB,EAAWpB,CAAI,EAC3B,KAAK0B,GAAU,CAEd,MAAMC,EADSD,EAAO,KACH,KAEnB,OAAIC,EAAI,OAAS,IACfzB,EAAOyB,CAAG,EACVtB,EAAQ,QAAO,EACfa,EAAO,UAAU,IAAI,OAAO,GAEvBQ,EAAO,IACpB,CAAK,EACA,KAAKA,GAAU,CACd,MAAMG,EAAc,KAAK,KAAKH,EAAO,UAAY,EAAE,EAC/C1B,EAAO6B,IACTL,EAAS,KAAK,CACZ,QAAS,4DACnB,CAAS,EACDL,EAAW,UAAU,IAAI,OAAO,EAChCD,EAAO,UAAU,IAAI,OAAO,EAEpC,CAAK,CACL"}